<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Example projects and demos: sdio_slave_interrupt</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="airoha.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Example projects and demos
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Project&#160;user's&#160;guide</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mt7682__hdk__hal__examples__sdio__slave__interrupt.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">sdio_slave_interrupt<div class="ingroups"><a class="el" href="group__mt7682__hdk.html">mt7682_hdk</a> &raquo; <a class="el" href="group__mt7682__hdk__hal__examples.html">hal_examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<dl class="section user"><dt>Overview</dt><dd><ul>
<li>Example description<ul>
<li>This example is a reference application to demonstrate how to use SDIO master API to communicate with an SDIO slave with two LinkIt 7682 HDKs. The example is the SDIO slave part.</li>
<li>This example does not require FreeRTOS.</li>
</ul>
</li>
<li>Results<ul>
<li>The system result is in the log.</li>
</ul>
</li>
<li>Features of the example project<ul>
<li>The example project has two parts: 1. LinkIt 7682 HDK operates as SDIO Master device (sdio_host_interrupt). 2. LinkIt 7682 HDK operates as SDIO Slave device (sdio_slave_interrupt). The communication between master and slave devices is shown below. <div class="fragment"><div class="line">_________________________                       __________________________</div><div class="line">|           ______________|                     |______________            |</div><div class="line">|         |SDIO Master    |                     |    SDIO Slave|           |</div><div class="line">|         |               |                     |              |           |</div><div class="line">|         |      J2101 G11|_____________________|J2101 G11     |           |</div><div class="line">|         |      J2101 G12|_____________________|J2101 G12     |           |</div><div class="line">|         |      J2101 G13|_____________________|J2101 G13     |           |</div><div class="line">|         |      J2101 G14|_____________________|J2101 G14     |           |</div><div class="line">|         |      J2101 G15|_____________________|J2101 G15     |           |</div><div class="line">|         |      J2101 G16|_____________________|J2101 G16     |           |</div><div class="line">|         |_______________|                     |______________|           |</div><div class="line">|                         |                     |                          |</div><div class="line">|                         |                     |                          |</div><div class="line">|                         |                     |                          |</div><div class="line">|                         |                     |                          |</div><div class="line">|                J2111 GND|_____________________|J2111 GND                 |</div><div class="line">|                         |                     |                          |</div><div class="line">|_MT7682__________________|                     |_MT7682___________________|</div></div><!-- fragment --></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Hardware and software environment</dt><dd><ul>
<li>Supported platform<ul>
<li>Linkit 7682 HDK should Remove R4101/R4102/R4103/R4104/R4105 and R5 on the sub-board.</li>
<li>Master SDIO need put jumper to high( J2201、J2202、J2203、J2205、J2206).</li>
</ul>
</li>
<li>HDK switches and pin configuration<ul>
<li>Connect J2101.G11 to J2101.G11</li>
<li>Connect J2101.G12 to J2101.G12</li>
<li>Connect J2101.G13 to J2101.G13</li>
<li>Connect J2101.G14 to J2101.G14</li>
<li>Connect J2101.G15 to J2101.G15</li>
<li>Connect J2101.G16 to J2101.G16</li>
<li>SDIO master module pin mapping table is shown below. <table class="doxtable">
<tr>
<th>SDIO Pin</th><th>GPIOx </th><th>PINx  </th></tr>
<tr>
<td>CLK </td><td>GPIO_11 </td><td>J2101.G11 </td></tr>
<tr>
<td>CMD </td><td>GPIO_12 </td><td>J2101.G12 </td></tr>
<tr>
<td>DAT0 </td><td>GPIO_13 </td><td>J2101.G13 </td></tr>
<tr>
<td>DAT1 </td><td>GPIO_14 </td><td>J2101.G14 </td></tr>
<tr>
<td>DAT2 </td><td>GPIO_15 </td><td>J2101.G15 </td></tr>
<tr>
<td>DAT3 </td><td>GPIO_16 </td><td>J2101.G16 </td></tr>
</table>
- Environment configuration</li>
<li>The output logs are communicated through a type-A to micro-B USB cable to the PC from MK20 USB connector on the HDK.</li>
<li>Install the mbed serial driver according to the instructions at <a href="https://developer.mbed.org/handbook/Windows-serial-configuration">https://developer.mbed.org/handbook/Windows-serial-configuration</a>. For more information, please refer to section "Installing the LinkIt 7682
      HDK drivers on Microsoft Windows" on the "LinkIt 7682 HDK User Guide" in [sdk_root]/doc folder.</li>
<li>Use a type-A to micro-B USB cable to connect type-A USB of the PC and MK20 micro-B USB connector on the LinkIt 7682 HDK. For more information about the connector cable, please refer to <a href="https://en.wikipedia.org/wiki/USB#Mini_and_micro_connectors">https://en.wikipedia.org/wiki/USB#Mini_and_micro_connectors</a>.</li>
<li>Launch a terminal emulator program, such as Tera terminal on your PC for data logging through UART. For the installation details, please refer to section "Installing Tera terminal on Microsoft Windows" on the "Airoha IoT SDK for RTOS Get Started Guide" in [sdk_root]/doc folder.</li>
<li>COM port settings. baudrate: 115200, data: 8 bits, stop bit: 1, parity: none and flow control: off.</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Directory contents</dt><dd><ul>
<li>Source and header files<ul>
<li><b>src/main.c</b>: Main program.</li>
<li><b>src/slt_sdio_slv.c</b>: SDIO slave test program.</li>
<li><b>src/system_mt7682.c</b>: MT7682 system clock configuration file.</li>
<li><b>inc/hal_feature_config.h</b>: MT7682 feature configuration file.</li>
<li><b>inc/memory_map.h</b>: MT7682 memory layout symbol file.</li>
<li><b>GCC/startup_mt7682.s</b>: MT7682 startup file for GCC.</li>
<li><b>GCC/syscalls.c</b>: MT7682 syscalls for GCC.</li>
<li><b>EWARM/startup_mt7682.s</b>: MT7682 startup file for IAR.</li>
</ul>
</li>
<li>Project configuration files using GCC<ul>
<li><b>GCC/feature.mk</b>: Feature configuration file.</li>
<li><b>GCC/Makefile</b>: Makefile.</li>
<li><b>GCC/mt7682_flash.ld</b>: Linker script.</li>
</ul>
</li>
<li>Project configuration files using IAR<ul>
<li><b>EWARM/sdio_slave_interrupt.ewd</b>: IAR project options. Contains the settings for the debugger.</li>
<li><b>EWARM/sdio_slave_interrupt.ewp</b>: IAR project file. Contains the project structure in XML format.</li>
<li><b>EWARM/sdio_slave_interrupt.eww</b>: IAR workspace file. Contains project information.</li>
<li><b>EWARM/flash.icf</b>: Linker script.</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Run the example</dt><dd><ul>
<li>Build the example project for Master with a command "./build.sh
    mt7682_hdk sdio_slave_interrupt bl" from the SDK root folder and download the binary file to the LinkIt 7682 HDK that operates as SDIO Slave.</li>
<li>Build the example project for Host with a command "./build.sh mt7682_hdk
    sdio_host_interrupt bl" from the SDK root folder and download the binary file to the 7682 HDK that operates as SDIO Host.</li>
<li>Connect the related pins of the two LinkIt 7682 HDKs as shown in the "Features of the example project" and "HDK switches and pin
    configuration" sections.</li>
<li>Connect the HDK to the PC with a type-A to micro-B USB cable and specify the port on Tera terminal corresponding to "mbed Serial Port".</li>
<li>Run the example. The log will show the communication result with the SDIO Slave. The log of "example project test success." for master board and "example project test success." for slave board indicates a successful communication. Please make sure the LinkIt 7682 HDK boards (Slave) are powered up at the first. </li>
</ul>
</dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 21 2018 17:29:30 for Example projects and demos by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
